{% extends "base.html" %}

{% block title %}Shida - Découverte{% endblock %}

{% block content %}
<div class="discovery-container">
    <div class="logo-text" style="font-size: 1.8rem; margin-bottom: 10px;">SHIDA</div>
    
    <div class="card-stack" id="cardStack">
        <div class="loading-spinner">
            <div class="spinner"></div>
        </div>
    </div>
    
    <div class="action-buttons">
        <button class="action-btn dislike" id="dislikeBtn">✕</button>
        <button class="action-btn like" id="likeBtn">♥</button>
    </div>
</div>

<div class="match-overlay" id="matchOverlay">
    <div class="match-popup" style="position: relative;">
        <button class="close-popup" onclick="Discovery.hideMatchPopup()">✕</button>
        <h2 class="match-title">Affaire Conclue !</h2>
        <div class="match-profiles">
            <img src="https://via.placeholder.com/80" class="match-avatar" alt="You">
            <span class="match-connector">—</span>
            <img src="https://via.placeholder.com/80" class="match-avatar" alt="Match">
        </div>
        <p class="match-subtitle">Vous avez les mêmes objectifs.</p>
        <button class="match-cta" onclick="Discovery.useTokenAndChat()">Payer 1 Jeton pour saluer</button>
        <button class="match-dismiss" onclick="Discovery.hideMatchPopup()">Retour à l'accueil</button>
    </div>
</div>

{% include "components/bottom_nav.html" %}
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', async () => {
    await ShidaApp.init();
    Discovery.init();
});
</script>
{% endblock %}
