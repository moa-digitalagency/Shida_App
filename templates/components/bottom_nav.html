<nav class="bottom-nav">
    <a href="/home" class="nav-item {% if request.path == '/home' %}active{% endif %}" data-protected="true">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
            <polyline points="9 22 9 12 15 12 15 22"></polyline>
        </svg>
        <span class="nav-label">Accueil</span>
    </a>
    <a href="/notifications" class="nav-item {% if request.path == '/notifications' %}active{% endif %}" data-protected="true">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
        </svg>
        <span class="nav-label">Alertes</span>
        <span class="nav-badge" id="notifBadge" style="display: none;">0</span>
    </a>
    <a href="/discovery" class="nav-item {% if request.path == '/discovery' %}active{% endif %}">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <polygon points="16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76"></polygon>
        </svg>
        <span class="nav-label">Explorer</span>
    </a>
    <a href="/negotiations" class="nav-item {% if request.path == '/negotiations' %}active{% endif %}" data-protected="true">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
        <span class="nav-label">Négociation</span>
        <span class="nav-badge" id="msgBadge" style="display: none;">0</span>
    </a>
    <a href="/profile" class="nav-item {% if request.path == '/profile' %}active{% endif %}" data-protected="true">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span class="nav-label">Profil</span>
    </a>
</nav>

<div class="login-modal" id="loginModal">
    <div class="login-modal-content">
        <div class="login-modal-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
        </div>
        <h3>Connexion requise</h3>
        <p>Connectez-vous pour accéder à cette fonctionnalité</p>
        <div class="login-modal-buttons">
            <a href="/login" class="login-modal-btn primary">Se connecter</a>
            <button class="login-modal-btn secondary" onclick="closeLoginModal()">Retour</button>
        </div>
    </div>
</div>

<script>
window.addEventListener('ShidaReady', function() {
    const navItems = document.querySelectorAll('.nav-item[data-protected="true"]');
    
    navItems.forEach(item => {
        item.addEventListener('click', function(e) {
            if (!ShidaApp.currentUser) {
                e.preventDefault();
                showLoginModal();
            }
        });
    });
});

function showLoginModal() {
    document.getElementById('loginModal').classList.add('active');
}

function closeLoginModal() {
    document.getElementById('loginModal').classList.remove('active');
}
</script>
